<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C++ Logger: LoggerBase/include/avn/logger/logger_base.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">C++ Logger
   &#160;<span id="projectnumber">1.1</span>
   </div>
   <div id="projectbrief">Logger</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3aff256326a031d244d0b864a1bccb0d.html">LoggerBase</a></li><li class="navelem"><a class="el" href="dir_8fef5e6a63d7d4acec4af3d7230493bd.html">include</a></li><li class="navelem"><a class="el" href="dir_dd619a56ff99a1bbf31613af76950f9c.html">avn</a></li><li class="navelem"><a class="el" href="dir_26d3e0709cdf3c43e66c3fc7b050a0ab.html">logger</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">logger_base.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>CLoggerBase class implements base logging functionality.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;set&gt;</code><br />
<code>#include &lt;stack&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;<a class="el" href="data__types_8h_source.html">avn/logger/data_types.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="base__thr__safety_8h_source.html">avn/logger/base_thr_safety.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="logger__task_8h_source.html">avn/logger/logger_task.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="logger__group_8h_source.html">avn/logger/logger_group.h</a>&gt;</code><br />
</div>
<p><a href="logger__base_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_logger_1_1_c_logger_base.html">Logger::CLoggerBase&lt; _ThrSafe, _TLogData &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>CLoggerBase class implements base logging functionality. </p>
<p><a class="el" href="class_logger_1_1_c_logger_base.html">Logger::CLoggerBase</a> class is the root class for all logging functionality. It implements base entities like logger level management and tasks management. You have to implement your class that inherits its base functionality to introduce any unimplemented logger features.</p>
<p>This class has features listed below :</p><ul>
<li>multithreading or single thread mode.</li>
<li>enable or disable logger levels. If current output message has level that is enabled, it will be output. Also it is possible to output regardless of current logger level by using <a class="el" href="class_logger_1_1_c_logger_base.html#ace9f4d8e62ef01f2ca231ba5030d5bbd">Logger::CLoggerBase::ForceAddToLog</a> call.</li>
<li>add logger tasks and automatically finish them.</li>
</ul>
<p>In multithread mode all output calls are protected by std::mutex. However, it is redundant for single thread mode.</p>
<p>Logger levels separate all messaged to "enabled" and "disabled" ones. During logger work (usually at the beginning) you enable some logger levels. After you output messages with logger level. Like this you can disable, say, debug messages for normal operation mode.</p>
<p>See logger level illustration below : </p><div class="fragment"><div class="line"><span class="comment">// CLogger - CLoggerBase child logger implementation with enumeration that contains DEBUG, WARNING, ERROR constants.</span></div>
<div class="line"><span class="comment">// It also has Output method that calls CLoggerBase::AddToLog function.</span></div>
<div class="line"> </div>
<div class="line">CLogger logger;</div>
<div class="line"> </div>
<div class="line">logger.EnableLevel( CLogger::DEBUG );</div>
<div class="line">logger.EnableLevel( CLogger::ERROR );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Messages below will be output</span></div>
<div class="line">logger.Output( CLogger::DEBUG, Msg1 );</div>
<div class="line">logger.Output( CLogger::ERROR, Msg2 );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Messages below won&#39;t be output</span></div>
<div class="line">logger.Output( CLogger::WARNING, Msg3 );</div>
<div class="line">logger.Output( CLogger::WARNING, Msg4 );</div>
<div class="line"> </div>
<div class="line">logger.DisableLevel( CLogger::DEBUG );</div>
<div class="line">logger.EnableLevel( CLogger::WARNING );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Messages below will be output</span></div>
<div class="line">logger.Output( CLogger::WARNING, Msg5 );</div>
<div class="line">logger.Output( CLogger::ERROR, Msg6 );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Message below won&#39;t be output</span></div>
<div class="line">logger.Output( CLogger::DEBUG, Msg7 );</div>
</div><!-- fragment --><p>To understand task entity let discuss an example. Say, you have some function that connects to the database and changes some field. Like this you have many small operations like database connection, search query and add query. On each step you can terminate whole function (if you can't connect to the database, you won't be able to search data). In case of error it would be convenient to output debug information : database and user name, database address, query etc. But if function is successful, you won't need to output all this messages, even it may be no messages at all. In this case logger tasks will help you.</p>
<p>When you call <a class="el" href="class_logger_1_1_c_logger_base.html#a7fc455def15fc80e8ac2fc6b10f6a51d">Logger::CLoggerBase::AddTask</a> function, you enable task mode for the current thread. During this mode all messages are collected in the internal array and without outputing. They will be output at the task finish. Before task finish you set task mode - successful or not. If the task is unsuccessful, all messages will be output. In another case only enabled messages will be output.</p>
<p>Example below illustrates tasks usage :</p>
<div class="fragment"><div class="line"><span class="comment">// CLogger - the same class as in example above.</span></div>
<div class="line"> </div>
<div class="line">CLogger logger;</div>
<div class="line"> </div>
<div class="line">logger.EnableLevel( CLogger::ERROR );</div>
<div class="line"> </div>
<div class="line">{</div>
<div class="line">  <span class="keyword">auto</span> task = logger.AddTask();    <span class="comment">// Task is in unsuccessful state</span></div>
<div class="line"> </div>
<div class="line">  logger.Output( CLogger::DEBUG, msg1 );</div>
<div class="line">  logger.Output( CLogger::WARNING, msg2 );</div>
<div class="line">  logger.Output( CLogger::ERROR, msg3 );</div>
<div class="line"> </div>
<div class="line">}   <span class="comment">// At this point all messages will be output.</span></div>
<div class="line"> </div>
<div class="line">{</div>
<div class="line">  <span class="keyword">auto</span> task = logger.AddTask();    <span class="comment">// Task is in unsuccessful state</span></div>
<div class="line"> </div>
<div class="line">  logger.Output( CLogger::DEBUG, msg4 );</div>
<div class="line">  logger.Output( CLogger::WARNING, msg5 );</div>
<div class="line">  logger.Output( CLogger::ERROR, msg6 );</div>
<div class="line"> </div>
<div class="line">  task.Succeeded(); <span class="comment">// Now task is in successful state</span></div>
<div class="line">}   <span class="comment">// At this point message msg6 will be output.</span></div>
</div><!-- fragment --> 
<p class="definition">Definition in file <a class="el" href="logger__base_8h_source.html">logger_base.h</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
